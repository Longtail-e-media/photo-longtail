<!DOCTYPE html>
<html lang="en">
<head>
    <jcms:site:seotitle/>

    <!-- Fevicon -->
    <jcms:site:fevicon/>

    <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css'>
    <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.2/css/lightgallery.min.css'>
    <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.2/css/lg-zoom.min.css'>
    
    <!--<link rel="stylesheet" href="css/owl.carousel.min.css">-->
    <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css' 
        integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!--<link rel="stylesheet" href="css/bootstrap.min.css">-->
    <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css' 
        integrity="sha512-b2QcS5SsA8tZodcDtGRELiGv5SaKSk1vDHDaQRda0htPYWZ6046lr3kJ5bAAQdpV2mmA/4v0wQF9MyU6/pDIAg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <link rel="stylesheet" href='//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css'>
    
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <!--<link rel="stylesheet" href="css/placeholder.min.css">-->
    <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/placeholder-loading/0.7.0/placeholder-loading.min.css' 
        integrity="sha512-SJ3F6J10BWdf4p2nz8CRkUzvlNvGulBf/tlWHfhxOJIcKgHVLAdYP+snnVyD7MhW8jXwcyRx0E5QNoIgNRoXeA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!--<link type="text/css" rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.2/css/lightgallery-bundle.min.css'/>-->

    <!-- start head script -->
    <!--<link rel="stylesheet" href="css/be-style.css">-->
    <!--<script src="js/be-script.js"></script>-->
    <!-- end head script -->


    <style>
        /*.grid {*/
        /*    display: flex;*/
        /*    flex-wrap: wrap;*/
        /*}*/

        /*.grid-item {*/
        /*    width: 30%; !* You can adjust the width *!*/
        /*    margin: 5px;*/
        /*    background: #eee;*/
        /*    box-sizing: border-box;*/
        /*}*/

        /*.grid-item img {*/
        /*    display: block;*/
        /*    width: 100%;*/
        /*    height: auto;*/
        /*}*/

        /* Responsive design for tablets */
        @media (max-width: 768px) {
            .grid-item {
                width: 48.2%; /* 2 columns */
            }
        }

        /* Responsive design for mobile phones */
        @media (max-width: 480px) {
            .grid-item {
                width: 100%; /* Single column for small screens */
            }
        }
    </style>
</head>

<body>

<!-- navbar -->
<jcms:module:header/>
<!-- navbar end -->

<!-- date picker -->
<!--<jcms:module:booking_undergallery/>-->
<!-- date picker end -->

<!-- image Slider -->
<div class="image_slide">
    <div class="owl-carousel image__slider owl-theme">
        <jcms:module:slideshow/>
    </div>
</div>
<!-- image Slider end -->


<!-- inner banner -->
<jcms:module:gallery-brea d/>
<!-- inner banner end -->
<!--  -->
<!-- gallerr images -->


<jcms:module:portfolio-list-all/>

<!-- template -->

<!-- demo template -->
<div id="masonry__grid">
    <div class="row mx-3">

    </div>
</div>
<div id="loading" class="d-flex justify-content-center">
    <div class="spinner-border loading" role="status"></div>
</div>

<!-- demo template end -->

<div id="loadMore" class="text-center"></div>


<template id="skeleton">
    <div class="col-md-6 mt-4">
        <div class="bg-transparent border-0 p-0 ph-item">
            <div class="p-0 ph-col-12">
                <div class="ph-picture responsive-image-height" style="height: 400px;"></div>
                <div class="ph-row">
                    <!--<div class="ph-col-12 mt-3"></div>
                    <div class="ph-col-4"></div>
                    <div class="ph-col-8 empty"></div>
                    <div class="mt-3 ph-col-2"></div>-->

                    <div class="ph-col-12 mt-3 d-none"></div>
                    <div class="ph-col-4 d-none"></div>
                    <div class="mt-3 ph-col-6"></div>
                    <div class="ph-col-8 empty"></div>
                </div>
            </div>
        </div>
    </div>
</template>
<!-- template end -->

<!-- gallerr images end -->

<!-- new footer -->
<jcms:module:footer-booking/>
<!-- new footer end -->


<script>
    // lightGallery(document.getElementById('lightgallery'), {
    //     plugins: [lgZoom, lgThumbnail],
    //     licenseKey: 'your_license_key',
    //     speed: 500,
    //         thumbnail: true,
    //     // ... other settings
    // });

    let masonry = document.querySelector("#masonry__grid .row");
    let template = document.getElementById("skeleton");
    for (i = 1; i <= 6; i++) {
        masonry.append(template.content.cloneNode(true));
    }
</script>

<!--<script src="js/jquery.min.js"></script>-->
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js' 
    integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!--<script src='https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.2/lightgallery.min.js'></script>-->
<!--<script src='https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.2/plugins/thumbnail/lg-thumbnail.umd.min.js'></script>-->
<!--<script src='https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.2/plugins/zoom/lg-zoom.umd.min.js'></script>-->
<script src='https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js'></script>

<!--<script src="js/owl.carousel.min.js"></script>-->
<script src='https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js' 
    integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!--<script src="js/bootstrap.bundle.min.js"></script>-->
<script src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js' 
    integrity="sha512-X/YkDZyjTf4wyc2Vy16YGCPHwAY8rZJY+POgokZjQB2mhIRFJCckEGc6YyX9eNsPfn0PzThEuNs+uaomE5CO6A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.2/lightgallery.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js'></script>
<script src='https://code.jquery.com/ui/1.13.2/jquery-ui.js'></script>
<script src="js/index.js"></script>
<script src="js/dropdown.js"></script>
<!--<script src='https://cdnjs.cloudflare.com/ajax/libs/masonry/4.2.2/masonry.pkgd.min.js'></script>-->
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/5.0.0/imagesloaded.pkgd.min.js'></script>

<!-- ImagesLoaded to trigger layout after images are loaded -->
<!--<script src='https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js'></script>-->
<script>
//     const heading = document.getElementById('hide_on_scroll');

//   window.addEventListener('scroll', () => {
//     const rect = heading.getBoundingClientRect();
//     if (rect.top >= 100 && rect.bottom >= 0) {
//       heading.style.visibility = 'visible';
//     } else {
//       heading.style.visibility = 'hidden';
//     }
//   });
      const heading = document.getElementById('hide_on_scroll');

function handleScrollAndResize() {
  const rect = heading.getBoundingClientRect();
  const isMobile = window.innerWidth <= 767;

  if (isMobile) {
    heading.style.display = 'none';
  } else {
    if (rect.top >= 100 && rect.bottom >= 0) {
      heading.style.visibility = 'visible';
      heading.style.display = 'block'; 
    } else {
      heading.style.visibility = 'hidden';
      heading.style.display = 'block'; 
    }
  }
}

window.addEventListener('scroll', handleScrollAndResize);
window.addEventListener('resize', handleScrollAndResize); 
handleScrollAndResize();

</script>

<script>
    $(window).on('load', function () {

        var $grid = $('.grid').masonry({
            itemSelector: '.grid-item',
            percentPosition: true,
            columnWidth: '.grid-sizer'
        });
        // layout Masonry after each image loads
        $grid.imagesLoaded().progress(function () {
            $grid.masonry(layout);
        });
    })

    function triggerLightGallery(itemId) {
        const $element = $("#" + itemId);

        // Destroy any existing LightGallery instance
        if ($element.data('lightGallery')) {
            $element.data('lightGallery').destroy(true);
        }

        // Initialize LightGallery
        lightGallery($element[0], {
            selector: 'a',
        });
    }

    $(document).ready(function () {
        var base_url = $('base').attr('url');

        var $grid = $('#masonry-grid').masonry({
            itemSelector: '.grid-item',
            columnWidth: '.grid-item',
            percentPosition: true
        });

        // var htmlContent = ' <button id="loadMoreImages">Load more</button>'
        var pageCounter = 2;
        var isLoading = false;

        function loadMoreImages() {
            loadImages(pageCounter, function () {
                pageCounter++;
            });
        }

        function beforeLoading() {
            $('#loadMore').css('display', 'none');
            // $('.loading').css('display', 'block');
            $('#masonry__grid').css('display', 'block');
        }

        function afterLoading() {
            // $('#loadMore').css('display', 'block').html(htmlContent);
            $('.loading').css('display', 'none');
            $('#masonry__grid').css('display', 'none');
        }

        function loadImages(page = 1, onSuccess = () => {}) {
            if (isLoading) return;
            isLoading = true;

            $.ajax({
                url: base_url + 'ajax_images.php', // This is your PHP file that loads images
                data: {page: page},
                beforeSend: function () {
                    beforeLoading();
                },
                success: function (data) {
                    var $items = $(data);
                    // Ensure all images are loaded before Masonry layout
                    $items.imagesLoaded(function () {
                        // Append the items to Masonry and re-layout
                        $grid.append($items).masonry('appended', $items);
                        $grid.masonry('layout'); // Explicitly call layout after appending
                        afterLoading();
                        isLoading = false;
                        onSuccess(); // Call the success callback

                        /*$('#loadMoreImages').on('click', function () {
                            loadMoreImages();
                        })*/

                        // $items.on('click', '.gallery-image', function(e) {
                        //     e.preventDefault();
                        //     let ancestorId = $(this).closest('.zoom-img-container').attr('id');
                        //     triggerLightGallery(ancestorId);
                        // });
                        // console.log($items);
                    });
                }
            });
        }

        // Load initial images
        loadImages();

        // Infinite scroll
        $(window).on('scroll', function () {
            if ($(window).scrollTop() + $(window).height() >= $(document).height() - 100) {
                loadMoreImages();
            }
        });

        // Infinite scroll
        // $(window).scroll(function () {
        //     if ($(window).scrollTop() + $(window).height() >= $(document).height() - 200) {
        //         // var currentPage = parseInt($('#masonry-grid').attr('data-page')) || 1;
        //         loadImages(pageCounter + 1);
        //         $('#masonry-grid').attr('data-page', pageCounter + 1);
        //     }
        // });


    });

    $(document).on('click', '.gallery-image', function (e) {
        e.preventDefault();
        let ancestorId = $(this).closest('.zoom-img-container').attr('id');

        const $element = $("#" + ancestorId);

        lightGallery($element[0], {
            selector: 'a',
        });

        // Initialize LightGallery after a short delay
        const firstImage = $element.find('a').first(); // Get the first image link
        if (firstImage.length) {
            firstImage[0].click(); // Trigger click on the first image to open the gallery
        }
    })
</script>


</body>

</html>